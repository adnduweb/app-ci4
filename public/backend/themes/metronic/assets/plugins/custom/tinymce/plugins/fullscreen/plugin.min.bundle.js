(()=>{function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}!function(){"use strict";function n(e){var n=e;return{get:function(){return n},set:function(e){n=e}}}function r(n){return function(r){return o=e(t=r),(null===t?"null":"object"==o&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":o)===n;var t,o}}function t(n){return function(r){return e(r)===n}}function o(e){return!(null==e)}function i(){}function u(e){return function(){return e}}function c(e){return e}var a=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=r("string"),s=r("array"),f=t("boolean"),m=t("function"),d=t("number");function h(){return p}var v=u(!1),g=u(!0),p={fold:function(e,n){return e()},isSome:v,isNone:g,getOr:c,getOrThunk:y,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:c,orThunk:y,map:h,each:i,bind:h,exists:v,forall:g,filter:function(){return p},toArray:function(){return[]},toString:u("none()")};function y(e){return e()}function w(e){function r(){return t.get().each(e)}var t=n(D.none());return{clear:function(){r(),t.set(D.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(e){r(),t.set(D.some(e))}}}function b(){return w((function(e){return e.unbind()}))}function S(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t}function x(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function E(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function O(e,n){return function(e,n,r){for(var t=0,o=e.length;t<o;t++){var i=e[t];if(n(i,t))return D.some(i);if(r(i,t))break}return D.none()}(e,n,v)}function F(e,n){return-1!==e.indexOf(n)}function T(e){return void 0!==e.style&&m(e.style.getPropertyValue)}function k(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}var C=function e(n){function r(){return i}function t(e){return e(n)}var o=u(n),i={fold:function(e,r){return r(n)},isSome:g,isNone:v,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:r,orThunk:r,map:function(r){return e(r(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?i:p},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},D={some:C,none:h,from:function(e){return null==e?p:C(e)}},A=function(){return(A=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},R=Array.prototype.push,L=Object.keys,P={fromHtml:function(e,n){var r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return k(r.childNodes[0])},fromTag:function(e,n){return k((n||document).createElement(e))},fromText:function(e,n){return k((n||document).createTextNode(e))},fromDom:k,fromPoint:function(e,n,r){return D.from(e.dom.elementFromPoint(n,r)).map(k)}};function M(e){return function(n){return n.dom.nodeType===e}}function N(e,n){var r=String(n).toLowerCase();return O(e,(function(e){return e.search(r)}))}function H(e){return function(n){return F(n,e)}}function W(e){return window.matchMedia(e).matches}function q(e,n){var r=e.dom;if(1!==r.nodeType)return!1;var t=r;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function I(e){return P.fromDom(e.dom.ownerDocument)}function j(e){var n,r=De(e);return se(n=r)&&o(n.dom.host)?D.some(r):D.none()}function B(e){return P.fromDom(e.dom.host)}function V(e,n,r){!function(e,n,r){if(!(l(r)||f(r)||d(r)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}(e.dom,n,r)}function X(e,n){var r=e.dom.getAttribute(n);return null===r?void 0:r}function _(e,n){e.dom.removeAttribute(n)}function z(e,n){var r=e.dom;!function(e){for(var n,t=L(e),o=0,i=t.length;o<i;o++){var u=t[o];n=e[u],function(e,n,r){if(!l(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);T(e)&&e.style.setProperty(n,r)}(r,u,n)}}(n)}function U(e){function n(){return e.stopPropagation()}function r(){return e.preventDefault()}var t,i,u=P.fromDom(function(e){if(Ce()&&o(e.target)){var n=P.fromDom(e.target);if(ce(n)&&Ae(n)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return 0<(t=r).length?D.some(t[0]):D.none()}}var t;return D.from(e.target)}(e).getOr(e.target)),c=(t=r,i=n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(i.apply(null,e))});return{target:u,x:e.clientX,y:e.clientY,stop:n,prevent:r,kill:c,raw:e}}function $(e){var n=void 0===e?window:e;return Fe().browser.isFirefox()?D.none():D.from(n.visualViewport)}function K(e,n,r,t){return{x:e,y:n,width:r,height:t,right:e+r,bottom:n+t}}function Y(e,n,r){return $(r).map((function(r){function t(e){return n(U(e))}return r.addEventListener(e,t),{unbind:function(){return r.removeEventListener(e,t)}}})).getOrThunk((function(){return{unbind:i}}))}function G(e,n){e.fire("FullscreenStateChanged",{state:n})}function J(e){return e.getParam("fullscreen_native",!1,"boolean")}function Q(e){return e.dom===(void 0!==(n=I(e).dom).fullscreenElement?n.fullscreenElement:void 0!==n.msFullscreenElement?n.msFullscreenElement:void 0!==n.webkitFullscreenElement?n.webkitFullscreenElement:null);var n}function Z(e,n,r){function t(n){return function(r){var t=X(r,"style"),o=void 0===t?"no-styles":t.trim();o===n||(V(r,Ie,o),z(r,e.parseStyle(n)))}}var o,i,u,c,a,l,f=(l=function(e){return q(e,"*")},E(function(e,n){for(var r=m(n)?n:v,t=e.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=P.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(n,void 0),l)),d=function(e){for(var n=[],r=0,t=e.length;r<t;++r){if(!s(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);R.apply(n,e[r])}return n}(S(f,(function(e){return function(e,n){return t=function(e){return q(e,n)},E((r=e,D.from(r.dom.parentNode).map(P.fromDom).map(Te).map((function(e){return E(e,(function(e){return r.dom!==e.dom}))})).getOr([])),t);var r,t}(e,"*:not(.tox-silver-sink)")}))),h=(i="background-color",u=(o=r).dom,void 0!==(a=""!==(c=window.getComputedStyle(u).getPropertyValue(i))||Re(o)?c:Le(u,i))&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;");x(d,t("display:none!important;")),x(f,t(je+Be+h)),t((!0===Ve?"":je)+Be+h)(n)}function ee(e,n){return function(r){function t(e){return r.setActive(e.state)}return r.setActive(null!==n.get()),e.on("FullscreenStateChanged",t),function(){return e.off("FullscreenStateChanged",t)}}}function ne(){return fe(0,0)}function re(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version;return{current:r,version:t,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(ve),isSafari:n("Safari")}}function te(e){function n(e){return function(){return r===e}}var r=e.current,t=e.version;return{current:r,version:t,isWindows:n(ye),isiOS:n("iOS"),isAndroid:n(we),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(be),isFreeBSD:n(Se),isChromeOS:n(xe)}}"undefined"!=typeof window||Function("return this;")();var oe,ie,ue,ce=M(1),ae=M(3),le=M(9),se=M(11),fe=function(e,n){return{major:e,minor:n}},me={nu:fe,detect:function(e,n){var r,t,o=String(n).toLowerCase();return 0===e.length?ne():(t=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}}(e,r=o))?fe(i(1),i(2)):{major:0,minor:0};function i(e){return Number(r.replace(t,"$"+e))}},unknown:ne},de=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,he={browsers:u([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return F(e,"edge/")&&F(e,"chrome")&&F(e,"safari")&&F(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,de],search:function(e){return F(e,"chrome")&&!F(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return F(e,"msie")||F(e,"trident")}},{name:"Opera",versionRegexes:[de,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:H("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:H("firefox")},{name:"Safari",versionRegexes:[de,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(F(e,"safari")||F(e,"mobile/"))&&F(e,"applewebkit")}}]),oses:u([{name:"Windows",search:H("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return F(e,"iphone")||F(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:H("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:H("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:H("linux"),versionRegexes:[]},{name:"Solaris",search:H("sunos"),versionRegexes:[]},{name:"FreeBSD",search:H("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:H("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},ve="Firefox",ge=function(){return re({current:void 0,version:me.unknown()})},pe=re,ye=(u("Edge"),u("Chrome"),u("IE"),u("Opera"),u(ve),u("Safari"),"Windows"),we="Android",be="Solaris",Se="FreeBSD",xe="ChromeOS",Ee=function(){return te({current:void 0,version:me.unknown()})},Oe=te,Fe=(u(ye),u("iOS"),u(we),u("Linux"),u("OSX"),u(be),u(Se),u(xe),ue=!(oe=function(){return e=navigator.userAgent,n=D.from(navigator.userAgentData),r=W,g=he.browsers(),p=he.oses(),y=n.bind((function(e){return function(e,n){return function(n){for(var r=0;r<n.length;r++){var t=function(n){var r=n.brand.toLowerCase();return O(e,(function(e){var n;return r===(null===(n=e.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(e){return{current:e.name,version:me.nu(parseInt(n.version,10),0)}}))}(n[r]);if(t.isSome())return t}return D.none()}(n.brands)}(g,e)})).orThunk((function(){return N(g,n=e).map((function(e){var r=me.detect(e.versionRegexes,n);return{current:e.name,version:r}}));var n})).fold(ge,pe),w=N(p,t=e).map((function(e){var n=me.detect(e.versionRegexes,t);return{current:e.name,version:n}})).fold(Ee,Oe),{browser:y,os:w,deviceType:(i=y,c=e,a=r,l=(o=w).isiOS()&&!0===/ipad/i.test(c),s=o.isiOS()&&!l,m=(f=o.isiOS()||o.isAndroid())||a("(pointer:coarse)"),d=l||!s&&f&&a("(min-device-width:768px)"),h=s||f&&!d,v=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(c),{isiPad:u(l),isiPhone:u(s),isTablet:u(d),isPhone:u(h),isTouch:u(m),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:u(v),isDesktop:u(!h&&!d&&!v)})};var e,n,r,t,o,i,c,a,l,s,f,m,d,h,v,g,p,y,w}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ue||(ue=!0,ie=oe.apply(null,e)),ie}),Te=function(e){return S(e.dom.childNodes,P.fromDom)},ke=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),Ce=u(ke),De=ke?function(e){return P.fromDom(e.dom.getRootNode())}:function(e){return le(e)?e:I(e)},Ae=function(e){return o(e.dom.shadowRoot)},Re=function e(n){var r=ae(n)?n.dom.parentNode:n.dom;if(null==r||null===r.ownerDocument)return!1;var t,o,i=r.ownerDocument;return j(P.fromDom(r)).fold((function(){return i.body.contains(r)}),(t=e,o=B,function(e){return t(o(e))}))},Le=function(e,n){return T(e)?e.style.getPropertyValue(n):""},Pe=function(e,n,r,t){e.dom.removeEventListener(n,r,t)},Me=g,Ne=function e(n,r){return{left:n,top:r,translate:function(t,o){return e(n+t,r+o)}}},He=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),We=tinymce.util.Tools.resolve("tinymce.Env"),qe=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ie="data-ephox-mobile-fullscreen-style",je="position:absolute!important;",Be="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ve=We.os.isAndroid(),Xe=He.DOM,_e=$().fold((function(){return{bind:i,unbind:i}}),(function(e){var n,r=(n=w(i),A(A({},n),{on:function(e){return n.get().each(e)}})),t=b(),o=b(),u=qe.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){r.on((function(n){return z(n,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})}))}))}),50);return{bind:function(e){r.set(e),u(),t.set(Y("resize",u)),o.set(Y("scroll",u))},unbind:function(){r.on((function(){t.clear(),o.clear()})),r.clear()}}})),ze=function e(n,r){function t(e){e(w,"tox-fullscreen"),e(b,"tox-fullscreen"),e(E,"tox-fullscreen"),j(O).map((function(e){return B(e).dom})).each((function(n){e(n,"tox-fullscreen"),e(n,"tox-shadowhost")}))}function o(){var e,o,i,u;C&&(e=n.dom,o="["+Ie+"]",x(1!==(i=u=document).nodeType&&9!==i.nodeType&&11!==i.nodeType||0===i.childElementCount?[]:S(u.querySelectorAll(o),P.fromDom),(function(n){var r=X(n,Ie);"no-styles"!==r?z(n,e.parseStyle(r)):_(n,"style"),_(n,Ie)}))),t(Xe.removeClass),_e.unbind(),D.from(r.get()).each((function(e){return e.fullscreenChangeHandler.unbind()}))}var i,u,c,a,l,s,f,m,d,h,v,g,p,y,w=document.body,b=document.documentElement,E=n.getContainer(),O=P.fromDom(E),F=j(s=P.fromDom(n.getElement())).map(B).getOrThunk((function(){var e=I(s).dom.body;if(null==e)throw new Error("Body is not available yet");return P.fromDom(e)})),T=r.get(),k=P.fromDom(n.getBody()),C=We.deviceType.isTouch(),A=E.style,R=n.iframeElement.style;T?(T.fullscreenChangeHandler.unbind(),J(n)&&Q(F)&&((a=I(F).dom).exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()),R.width=T.iframeWidth,R.height=T.iframeHeight,A.width=T.containerWidth,A.height=T.containerHeight,A.top=T.containerTop,A.left=T.containerLeft,c=T.scrollPos,window.scrollTo(c.x,c.y),r.set(null),G(n,!1),o(),n.off("remove",o)):(i=function(e,n,r){return o=n,i=Me,u=r,c=function(e){i(e)&&u(U(e))},(t=e).dom.addEventListener(o,c,!1),{unbind:function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=n.concat(r);return e.apply(null,o)}}(Pe,t,o,c,!1)};var t,o,i,u,c}(I(F),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(t){J(n)&&(Q(F)||null===r.get()||e(n,r))})),u={scrollPos:(f=window,g=void 0===f?window:f,p=g.document,h=(d=void 0!==(m=P.fromDom(p))?m.dom:document).body.scrollLeft||d.documentElement.scrollLeft,v=d.body.scrollTop||d.documentElement.scrollTop,y=Ne(h,v),$(g).fold((function(){var e=g.document.documentElement,n=e.clientWidth,r=e.clientHeight;return K(y.left,y.top,n,r)}),(function(e){return K(Math.max(e.pageLeft,y.left),Math.max(e.pageTop,y.top),e.width,e.height)}))),containerWidth:A.width,containerHeight:A.height,containerTop:A.top,containerLeft:A.left,iframeWidth:R.width,iframeHeight:R.height,fullscreenChangeHandler:i},C&&Z(n.dom,O,k),R.width=R.height="100%",A.width=A.height="",t(Xe.addClass),_e.bind(O),n.on("remove",o),r.set(u),J(n)&&((l=F.dom).requestFullscreen?l.requestFullscreen():l.msRequestFullscreen?l.msRequestFullscreen():l.webkitRequestFullScreen&&l.webkitRequestFullScreen()),G(n,!0))};a.add("fullscreen",(function(e){var r,t,o,i,u,c=n(null);return e.inline||(t=c,(r=e).addCommand("mceFullScreen",(function(){ze(r,t)})),(o=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:a,onSetup:ee(o,i=c)}),o.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:a,onSetup:ee(o,i)}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),u=c,{isFullscreen:function(){return null!==u.get()}};function a(){return o.execCommand("mceFullScreen")}}))}()})();