(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(){"use strict";function e(e){return function(r){return o=t(n=r),(null===n?"null":"object"==o&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":o)===e;var n,o}}function r(t){return t.getParam("importcss_selector_converter")}function n(t){return a(t)?function(e){return-1!==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:t}function o(t,e){var r,n=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(e);if(n){var o=n[1],i=n[2].substr(1).split(".").join(" "),c=p.makeMap("a,img");return n[1]?(r={title:e},t.schema.getTextBlockElements()[o]?r.block=o:t.schema.getBlockElements()[o]||c[o.toLowerCase()]?r.selector=o:r.inline=o):n[2]&&(r={inline:"span",title:e.substr(1),classes:i}),!1!==t.getParam("importcss_merge_classes")?r.classes=i:r.attributes={class:i},r}}function i(t,e){return null===e||!1!==t.getParam("importcss_exclusive")}function c(t){t.on("init",(function(){function e(e,n){if(v=e,b=d,!(i(t,h=n)?v in b:v in h.selectors)){p=e,g=d,i(t,y=n)?g[p]=!0:y.selectors[p]=!0;var c=(u=(a=t).plugins.importcss,f=e,((m=n)&&m.selector_converter?m.selector_converter:r(a)?r(a):function(){return o(a,f)}).call(u,f,m));if(c){var s=c.name||l.DOM.uniqueId();return t.formatter.register(s,c),{title:c.title,format:s}}}var a,u,f,m,p,y,g,v,h,b;return null}var c,s,g,v,h=(c=[],s=[],g={},{addItemToGroup:function(t,e){g[t]?g[t].push(e):(s.push(t),g[t]=[e])},addItem:function(t){c.push(t)},toFormats:function(){return function(t){for(var e=[],r=0,n=t.length;r<n;++r){if(!u(t[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+t);y.apply(e,t[r])}return e}(function(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;o++){var i=t[o];n[o]=e(i)}return n}(s,(function(t){var e=g[t];return 0===e.length?[]:[{title:t,items:e}]}))).concat(c)}}),d={},b=n(t.getParam("importcss_selector_filter")),_=(v=t.getParam("importcss_groups"),p.map(v,(function(t){return p.extend({},t,{original:t,selectors:{},filter:n(t.filter)})})));p.each(function(t,e,r){var n=[],o={},i=function e(o,i){var c,s,u=o.href,l=m.cacheSuffix;if((s=u=a(u)?u.replace("?"+l,"").replace("&"+l,""):u)&&r(s,i)&&!function(t,e){var r,n=!1!==(r=t.getParam("skin"))&&(r||"oxide");if(n){var o=t.getParam("skin_url"),i=o?t.documentBaseURI.toAbsolute(o):f.baseURL+"/skins/ui/"+n,c=f.baseURL+"/skins/content/";return e===i+"/content"+(t.inline?".inline":"")+".min.css"||-1!==e.indexOf(c)}}(t,s)){p.each(o.imports,(function(t){e(t,!0)}));try{c=o.cssRules||o.rules}catch(o){}p.each(c,(function(t){t.styleSheet?e(t.styleSheet,!0):t.selectorText&&p.each(t.selectorText.split(","),(function(t){n.push(p.trim(t))}))}))}};p.each(t.contentCSS,(function(t){o[t]=!0})),r=r||function(t,e){return e||o[t]};try{p.each(e.styleSheets,(function(t){i(t)}))}catch(e){}return n}(t,t.getDoc(),n(t.getParam("importcss_file_filter"))),(function(t){var r,n,o;-1===t.indexOf(".mce-")&&(b&&!b(t)||(o=t,0<(r=p.grep(_,(function(t){return!t.filter||t.filter(o)}))).length?p.each(r,(function(r){var n=e(t,r);n&&h.addItemToGroup(r.title,n)})):(n=e(t,null))&&h.addItem(n)))}));var S=h.toFormats();t.fire("addStyleModifications",{items:S,replace:!t.getParam("importcss_append")})}))}var s=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=e("string"),u=e("array"),l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.EditorManager"),m=tinymce.util.Tools.resolve("tinymce.Env"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),y=Array.prototype.push;s.add("importcss",(function(t){return c(t),e=t,{convertSelectorToFormat:function(t){return o(e,t)}};var e}))}()})();