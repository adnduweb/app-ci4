(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(){"use strict";function t(t){return function(n){return o=e(r=n),(null===r?"null":"object"==o&&(Array.prototype.isPrototypeOf(r)||r.constructor&&"Array"===r.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(r)||r.constructor&&"String"===r.constructor.name)?"string":o)===t;var r,o}}function n(t){return function(n){return e(n)===t}}function r(){}function o(e){return function(){return e}}function i(e){return e}function a(e,t){return e===t}function u(e){return function(t){return!e(t)}}function s(){return y}var c=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=t("string"),l=t("object"),d=t("array"),m=n("boolean"),p=n("function"),g=n("number"),h=o(!1),v=o(!0),y={fold:function(e,t){return e()},isSome:h,isNone:v,getOr:i,getOrThunk:S,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:i,orThunk:S,map:s,each:r,bind:s,exists:h,forall:v,filter:function(){return y},toArray:function(){return[]},toString:o("none()")};function S(e){return e()}function C(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function b(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function N(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function O(e,t,n){return b(e,(function(e,r){n=t(n,e,r)})),n}function L(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return I.some(i);if(n(i,r))break}return I.none()}function T(e,t){return L(e,t,h)}function D(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!d(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);B.apply(t,e[n])}return t}(C(e,t))}function x(e){var t=P.call(e,0);return t.reverse(),t}function A(e,t){return 0<=t&&t<e.length?I.some(e[t]):I.none()}function w(e){return A(e,0)}function k(e){return A(e,e.length-1)}var E=function e(t){function n(){return a}function r(e){return e(t)}var i=o(t),a={fold:function(e,n){return n(t)},isSome:v,isNone:h,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:n,orThunk:n,map:function(n){return e(n(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?a:y},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return a},I={some:E,none:s,from:function(e){return null==e?y:E(e)}},P=Array.prototype.slice,B=Array.prototype.push,R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function M(e,t){var n=String(t).toLowerCase();return T(e,(function(e){return e.search(n)}))}function U(e,t){return-1!==e.indexOf(t)}function _(e){return function(t){return U(t,e)}}function $(e){return window.matchMedia(e).matches}function F(e,t){return e.dom===t.dom}function H(e,t){for(var n=he(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function j(){return Y(0,0)}function K(e){function t(e){return function(){return n===e}}var n=e.current,r=e.version;return{current:n,version:r,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(te),isSafari:t("Safari")}}function V(e){function t(e){return function(){return n===e}}var n=e.current,r=e.version;return{current:n,version:r,isWindows:t(oe),isiOS:t("iOS"),isAndroid:t(ie),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(ae),isFreeBSD:t(ue),isChromeOS:t(se)}}function W(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}var Q,X,q,z,Y=function(e,t){return{major:e,minor:t}},Z={nu:Y,detect:function(e,t){var n,r,o=String(t).toLowerCase();return 0===e.length?j():(r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,n=o))?Y(i(1),i(2)):{major:0,minor:0};function i(e){return Number(n.replace(r,"$"+e))}},unknown:j},G=(Q=/^\s+|\s+$/g,function(e){return e.replace(Q,"")}),J=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ee={browsers:o([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return U(e,"edge/")&&U(e,"chrome")&&U(e,"safari")&&U(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,J],search:function(e){return U(e,"chrome")&&!U(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return U(e,"msie")||U(e,"trident")}},{name:"Opera",versionRegexes:[J,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_("firefox")},{name:"Safari",versionRegexes:[J,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(U(e,"safari")||U(e,"mobile/"))&&U(e,"applewebkit")}}]),oses:o([{name:"Windows",search:_("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return U(e,"iphone")||U(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:_("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_("linux"),versionRegexes:[]},{name:"Solaris",search:_("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},te="Firefox",ne=function(){return K({current:void 0,version:Z.unknown()})},re=K,oe=(o("Edge"),o("Chrome"),o("IE"),o("Opera"),o(te),o("Safari"),"Windows"),ie="Android",ae="Solaris",ue="FreeBSD",se="ChromeOS",ce=function(){return V({current:void 0,version:Z.unknown()})},fe=V,le=(o(oe),o("iOS"),o(ie),o("Linux"),o("OSX"),o(ae),o(ue),o(se),z=!(X=function(){return e=navigator.userAgent,t=I.from(navigator.userAgentData),n=$,h=ee.browsers(),v=ee.oses(),y=t.bind((function(e){return function(e,t){return function(t){for(var n=0;n<t.length;n++){var r=function(t){var n=t.brand.toLowerCase();return T(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:Z.nu(parseInt(t.version,10),0)}}))}(t[n]);if(r.isSome())return r}return I.none()}(t.brands)}(h,e)})).orThunk((function(){return M(h,t=e).map((function(e){var n=Z.detect(e.versionRegexes,t);return{current:e.name,version:n}}));var t})).fold(ne,re),S=M(v,r=e).map((function(e){var t=Z.detect(e.versionRegexes,r);return{current:e.name,version:t}})).fold(ce,fe),{browser:y,os:S,deviceType:(a=y,u=e,s=n,c=(i=S).isiOS()&&!0===/ipad/i.test(u),f=i.isiOS()&&!c,d=(l=i.isiOS()||i.isAndroid())||s("(pointer:coarse)"),m=c||!f&&l&&s("(min-device-width:768px)"),p=f||l&&!m,g=a.isSafari()&&i.isiOS()&&!1===/safari/i.test(u),{isiPad:o(c),isiPhone:o(f),isTablet:o(m),isPhone:o(p),isTouch:o(d),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:o(g),isDesktop:o(!p&&!m&&!g)})};var e,t,n,r,i,a,u,s,c,f,l,d,m,p,g,h,v,y,S}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z||(z=!0,q=X.apply(null,e)),q}),de={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return W(n.childNodes[0])},fromTag:function(e,t){return W((t||document).createElement(e))},fromText:function(e,t){return W((t||document).createTextNode(e))},fromDom:W,fromPoint:function(e,t,n){return I.from(e.dom.elementFromPoint(t,n)).map(W)}},me=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),pe=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ge=tinymce.util.Tools.resolve("tinymce.util.VK"),he=Object.keys;function ve(e){return e.dom.nodeName.toLowerCase()}function ye(e){return function(t){return At(t)&&ve(t)===e}}function Se(e,t){var n=e.dom;H(t,(function(e,t){!function(e,t,n){if(!(f(n)||m(n)||g(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)}))}function Ce(e){return O(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})}function be(e){return I.from(e.dom.parentNode).map(de.fromDom)}function Ne(e){return C(e.dom.childNodes,de.fromDom)}function Oe(e,t){var n=e.dom.childNodes;return I.from(n[t]).map(de.fromDom)}function Le(e){return Oe(e,0)}function Te(e){return Oe(e,e.dom.childNodes.length-1)}function De(e,t){be(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))}function xe(e,t){e.dom.appendChild(t.dom)}function Ae(e,t){b(t,(function(t){xe(e,t)}))}function we(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)}function ke(e){return de.fromDom(e.dom.cloneNode(!0))}function Ee(e,t){var n,r,o=(n=e,Se(r=de.fromTag(t),Ce(n)),r);return De(e,o),Ae(o,Ne(e)),we(e),o}function Ie(e){return function(t){return t&&t.nodeName.toLowerCase()===e}}function Pe(e){return function(t){return t&&e.test(t.nodeName)}}function Be(e){return e&&3===e.nodeType}function Re(e,t){return t&&e.schema.getTextBlockElements()[t.nodeName]}function Me(e,t){return e&&e.nodeName in t}function Ue(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function _e(e,t){return e.isChildOf(t,e.getRoot())}function $e(e,t){var n,r,o,i,a=e.dom,u=e.schema.getBlockElements(),s=a.createFragment(),c=!1===(n=e.getParam("forced_root_block","p"))?"":!0===n?"p":n;if(c&&((o=a.create(c)).tagName===c.toUpperCase()&&a.setAttribs(o,e.getParam("forced_root_block_attrs",{})),Me(t.firstChild,u)||s.appendChild(o)),t)for(;r=t.firstChild;){var f=r.nodeName;i||"SPAN"===f&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),Me(r,u)?(s.appendChild(r),o=null):c?(o||(o=a.create(c),s.appendChild(o)),o.appendChild(r)):s.appendChild(r)}return c?i||o.appendChild(a.create("br",{"data-mce-bogus":"1"})):s.appendChild(a.create("br")),s}function Fe(e){Ft(e)&&Ee(e,"dd")}function He(e,t){if(Be(e))return{container:e,offset:t};var n=me.getNode(e,t);return Be(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&Be(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Be(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function je(e){var t=e.cloneRange(),n=He(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=He(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t}function Ke(e,t){var n=t||e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",jt(e,n))}function Ve(e){var t,n,r=e.selection.getSelectedBlocks();return N((t=e,n=kt.map(r,(function(e){return t.dom.getParent(e,"li,dd,dt",jt(t,e))||e})),Ht.unique(n)),Bt)}function We(e,t){return k(e.dom.getParents(t,"ol,ul",jt(e,t)))}function Qe(e,t,n){return void 0===n&&(n=a),e.exists((function(e){return n(e,t)}))}function Xe(e,t,n){return e.isSome()&&t.isSome()?I.some(n(e.getOrDie(),t.getOrDie())):I.none()}function qe(e,t,n){return e.fire("ListMutation",{action:t,element:n})}function ze(e,t){xe(e.item,t.list)}function Ye(e,t,n){var r=t.slice(0,n.depth);return k(r).each((function(t){var r,o,i,a,u,s,c=(r=n.itemAttributes,o=n.content,Se(i=de.fromTag("li",e),r),Ae(i,o),i);xe((a=t).list,c),a.item=c,s=n,ve((u=t).list)!==s.listType&&(u.list=Ee(u.list,s.listType)),Se(u.list,s.listAttributes)})),r}function Ze(e,t,n){var r,o=function(e,t,n){for(var r,o,i,a=[],u=0;u<n;u++)a.push((o=t.listType,xe((i={list:de.fromTag(o,r=e),item:de.fromTag("li",r)}).list,i.item),i));return a}(e,n,n.depth-t.length);return function(e){for(var t=1;t<e.length;t++)ze(e[t-1],e[t])}(o),function(e,t){for(var n=0;n<e.length-1;n++)!function(e,t,n){if(!f(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);void 0!==e.style&&p(e.style.getPropertyValue)&&e.style.setProperty(t,n)}(e[n].item.dom,"list-style-type","none");k(e).each((function(e){Se(e.list,t.listAttributes),Se(e.item,t.itemAttributes),Ae(e.item,t.content)}))}(o,n),r=o,Xe(k(t),w(r),ze),t.concat(o)}function Ge(e){return function(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}(e,"OL,UL")}function Je(e){return Le(e).exists(Ge)}function et(e){return 0<e.depth}function tt(e){return e.isSelected}function nt(e){return b(e,(function(t,n){function o(e){return e.depth===s&&!e.dirty}function i(e){return e.depth<s}var a,u,s;s=(a=e)[u=n].depth,L(x(a.slice(0,u)),o,i).orThunk((function(){return L(a.slice(u+1),o,i)})).fold((function(){var e,n,o,i,a,u;t.dirty&&(t.listAttributes=(e=t.listAttributes,o=function(e,t){return"start"!==t},i=n={},a=function(e,t){i[t]=e},u=r,H(e,(function(e,t){(o(0,t)?a:u)(e,t)})),n))}),(function(e){var n=e;t.listType=n.listType,t.listAttributes=R({},n.listAttributes)}))})),e}function rt(e,t,n,r){return Le(r).filter(Ge).fold((function(){t.each((function(e){F(e.start,r)&&n.set(!0)}));var o,i,a,u=(o=r,i=e,a=n.get(),be(o).filter(At).map((function(e){return{depth:i,dirty:!1,isSelected:a,content:(n=Ne(t=o),C(Te(t).exists(Ge)?n.slice(0,-1):n,ke)),itemAttributes:Ce(o),listAttributes:Ce(e),listType:ve(e)};var t,n})));t.each((function(e){F(e.end,r)&&n.set(!1)}));var s=Te(r).filter(Ge).map((function(r){return Vt(e,t,n,r)})).getOr([]);return u.toArray().concat(s)}),(function(r){return Vt(e,t,n,r)}))}function ot(e,t){return C(nt(t),(function(t){var n,r,o=(n=t.content,r=document.createDocumentFragment(),b(n,(function(e){r.appendChild(e.dom)})),de.fromDom(r));return de.fromDom($e(e,o.dom))}))}function it(e,t){var n=nt(t),r=e.contentDocument;return w(O(n,(function(e,t){return(t.depth>e.length?Ze:Ye)(r,e,t)}),[])).map((function(e){return e.list})).toArray()}function at(e,t){var n,r,o,i,a,s,c,f,l,d,m,p,g,h=C((i=We(o=r=e,o.selection.getStart()),a=N(o.selection.getSelectedBlocks(),It),s=i.toArray().concat(a),Kt(r,s)),de.fromDom),v=C(N(Ve(e),Rt),de.fromDom),y=!1;return(h.length||v.length)&&(n=e.selection.getBookmark(),f=t,b((l=h,g=C(Ve(c=e),de.fromDom),d=Xe(T(g,u(Je)),T(x(g),u(Je)),(function(e,t){return{start:e,end:t}})),m=!1,p={get:function(){return m},set:function(e){m=e}},C(l,(function(e){return{sourceList:e,entries:Vt(0,d,p,e)}}))),(function(e){!function(e,t){b(N(e,tt),(function(e){return function(e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0}(e),0}))}(e.entries,f);var t,n,r=(t=c,D(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],s=t(u);s!==n&&(r.push(o),o=[]),n=s,o.push(u)}return 0!==o.length&&r.push(o),r}(e.entries,et),(function(e){return(w(e).exists(et)?it:ot)(t,e)})));b(r,(function(e){qe(c,"Indent"===f?"IndentList":"OutdentList",e.dom)})),n=e.sourceList,b(r,(function(e){De(n,e)})),we(e.sourceList)})),function(e,t,n){b(n,"Indent"===t?Fe:function(t){return n=e,$t(r=t)?Ee(r,"dt"):Ft(r)&&be(r).each((function(e){return function(e,t,n){var r=_t.select('span[data-mce-type="bookmark"]',t),o=$e(e,n),i=_t.createRng();i.setStartAfter(n),i.setEndAfter(t);for(var a,u=i.extractContents(),s=u.firstChild;s;s=s.firstChild)if("LI"===s.nodeName&&e.dom.isEmpty(s)){_t.remove(s);break}e.dom.isEmpty(u)||_t.insertAfter(u,t),_t.insertAfter(o,t),Ue(e.dom,n.parentNode)&&(a=n.parentNode,kt.each(r,(function(e){a.parentNode.insertBefore(e,n.parentNode)})),_t.remove(a)),_t.remove(n),Ue(e.dom,t)&&_t.remove(t)}(n,e.dom,r.dom)})),0;var n,r})}(e,t,v),e.selection.moveToBookmark(n),e.selection.setRng(je(e.selection.getRng())),e.nodeChanged(),y=!0),y}function ut(e){return at(e,"Indent")}function st(e){return at(e,"Outdent")}function ct(e){return at(e,"Flatten")}function ft(e){function t(t){var r,o=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"];1===o.nodeType&&(r=Qt.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),t?o.insertBefore(r,o.childNodes[i]):Qt.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),n[t?"startContainer":"endContainer"]=o,n[t?"startOffset":"endOffset"]=i}var n={};return t(!0),e.collapsed||t(),n}function lt(e){function t(t){var n,r=n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"];r&&(1===r.nodeType&&(o=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(r),r=r.parentNode,Qt.remove(n),!r.hasChildNodes()&&Qt.isBlock(r)&&r.appendChild(Qt.create("br"))),e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=o)}t(!0),t();var n=Qt.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),je(n)}function dt(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function mt(e){return/\btox\-/.test(e.className)}function pt(e,t,n){function r(e){var r=L(e.parents,Et,Mt).filter((function(e){return e.nodeName===t&&!mt(e)})).isSome();n(r)}return r({parents:e.dom.getParents(e.selection.getNode())}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}function gt(e,t){kt.each(t,(function(t,n){e.setAttribute(n,t)}))}function ht(e,t,n){var r,o,i,a=n["list-style-type"]||null;e.setStyle(t,"list-style-type",a),r=e,gt(o=t,(i=n)["list-attributes"]),kt.each(r.select("li",o),(function(e){gt(e,i["list-item-attributes"])}))}function vt(e,t,n,r){var o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&Ut(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(Re(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function yt(e,t,n){var r,o,i=e.selection.getRng(),a="LI",u=jt(e,e.selection.getStart(!0)),s=e.dom;"false"!==s.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(a="DT"),r=ft(i),o=function(e,t,n){for(var r,o=[],i=e.dom,a=vt(e,t,!0,n),u=vt(e,t,!1,n),s=[],c=a;c&&(s.push(c),c!==u);c=c.nextSibling);return kt.each(s,(function(t){if(Re(e,t))return o.push(t),void(r=null);if(i.isBlock(t)||Ut(t))return Ut(t)&&i.remove(t),void(r=null);var a=t.nextSibling;Wt.isBookmarkNode(t)&&(Et(a)||Re(e,a)||!a&&t.parentNode===n)?r=null:(r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))})),o}(e,i,u),kt.each(o,(function(r){var o,i,u,c,f,l=r.previousSibling,d=r.parentNode;Bt(d)||(l&&Et(l)&&l.nodeName===t&&(c=n,s.getStyle(l,"list-style-type")===(f=null===(f=c?c["list-style-type"]:"")?"":f))?(o=l,r=s.rename(r,a),l.appendChild(r)):(o=s.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=s.rename(r,a)),i=s,u=r,kt.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],(function(e){var t;return i.setStyle(u,((t={})[e]="",t))})),ht(s,o,n),Xt(e.dom,o))})),e.selection.setRng(lt(r)))}function St(e,t,n){return a=n,(i=t)&&a&&Et(i)&&i.nodeName===a.nodeName&&(o=n,(r=e).getStyle(t,"list-style-type",!0)===r.getStyle(o,"list-style-type",!0))&&t.className===n.className;var r,o,i,a}function Ct(e,t,n){var r,o,i,a,u,s,c,f,d,m,p,g,h,v,y,S,C,b=Ke(e),O=(f=Ke(c=e),d=c.selection.getSelectedBlocks(),f&&1===d.length&&d[0]===f?N(f.querySelectorAll("ol,ul,dl"),Et):N(d,(function(e){return Et(e)&&f!==e}))),L=l(n)?n:{};0<O.length?(m=e,g=O,h=t,v=L,(C=Et(p=b))&&p.nodeName===h&&!qt(v)?ct(m):(yt(m,h,v),y=ft(m.selection.getRng()),S=C?function(e,t){for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||((n=n||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}([p],g):g,kt.each(S,(function(e){var t,n,r=m,o=h,i=v;(t=e).nodeName!==o?(n=r.dom.rename(t,o),ht(r.dom,n,i),qe(r,dt(o),n)):(ht(r.dom,t,i),qe(r,dt(o),t))})),m.selection.setRng(lt(y)))):(i=t,a=L,(o=b)!==(r=e).getBody()&&(o?o.nodeName!==i||qt(a)||mt(o)?(u=ft(r.selection.getRng()),ht(r.dom,o,a),s=r.dom.rename(o,i),Xt(r.dom,s),r.selection.setRng(lt(u)),yt(r,i,a),qe(r,dt(i),s)):ct(r):(yt(r,i,a),qe(r,dt(i),o))))}function bt(e,t,n,r){var o=t.startContainer,i=t.startOffset;if(Be(o)&&(n?i<o.data.length:0<i))return o;var a=e.schema.getNonEmptyElements();1===o.nodeType&&(o=me.getNode(o,i));var u,s,c=new pe(o,r);for(n&&(u=e.dom,Ut(s=o)&&u.isBlock(s.nextSibling)&&!Ut(s.previousSibling)&&c.next());o=c[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(a[o.nodeName])return o;if(Be(o)&&0<o.data.length)return o}}function Nt(e,t){var n=t.childNodes;return 1===n.length&&!Et(n[0])&&e.isBlock(n[0])}function Ot(e,t,n){var r,o,i,a=t.parentNode;_e(e,t)&&_e(e,n)&&(Et(n.lastChild)&&(r=n.lastChild),a===n.lastChild&&Ut(a.previousSibling)&&e.remove(a.previousSibling),(o=n.lastChild)&&Ut(o)&&t.hasChildNodes()&&e.remove(o),Ue(e,n,!0)&&e.$(n).empty(),function(e,t,n){var r,o,i,a=Nt(e,n)?n.firstChild:n;if(Nt(o=e,i=t)&&o.remove(i.firstChild,!0),!Ue(e,t,!0))for(;r=t.firstChild;)a.appendChild(r)}(e,t,n),r&&n.appendChild(r),i=function(e,t){return le().browser.isIE()?(n=e.dom,r=t.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(r)&o)):(i=e.dom)!==(a=t.dom)&&i.contains(a);var n,r,o,i,a}(de.fromDom(n),de.fromDom(t))?e.getParents(t,Et,n):[],e.remove(t),b(i,(function(t){Ue(e,t)&&t!==e.getRoot()&&e.remove(t)})))}function Lt(e,t){return e.selection.isCollapsed()?function(e,t){var n=e.dom,r=e.selection,o=r.getStart(),i=jt(e,o),a=n.getParent(r.getStart(),"LI",i);if(a){var u=a.parentNode;if(u===e.getBody()&&Ue(n,u))return 1;var s=je(r.getRng()),c=n.getParent(bt(e,s,t,i),"LI",i);if(c&&c!==a)return e.undoManager.transact((function(){var n,r,o,i,u,f,l,d,m;t?(r=s,o=c,i=a,(m=(n=e).dom).isEmpty(i)?(l=o,(f=n).dom.$(d=i).empty(),Ot(f.dom,l,d),f.selection.setCursorLocation(d,0)):(u=ft(r),Ot(m,o,i),n.selection.setRng(lt(u)))):a.parentNode.firstChild===a?st(e):function(e,t,n){var r=ft(s);Ot(e.dom,t,n);var o=lt(r);e.selection.setRng(o)}(e,a,c)})),1;if(!c&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact((function(){ct(e)})),1}}(i=e,a=t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=jt(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=je(e.selection.getRng()),u=n.getParent(bt(e,a,t,o),"LI",o);if(u)return e.undoManager.transact((function(){var r,a=i,s=(r=n).getParent(a.parentNode,r.isBlock,o);r.remove(a),s&&r.isEmpty(s)&&r.remove(s),Xt(n,u.parentNode),e.selection.select(u,!0),e.selection.collapse(t)})),1}}(i,a):(r=(n=e).selection.getStart(),o=jt(n,r),(n.dom.getParent(r,"LI,DT,DD",o)||0<Ve(n).length)&&(n.undoManager.transact((function(){var e,t,r;n.execCommand("Delete"),e=n.dom,t=n.getBody(),r=kt.grep(e.select("ol,ul",t)),kt.each(r,(function(t){var n,r,o,i=e;"LI"===(o=(n=t).parentNode).nodeName&&o.firstChild===n&&((r=o.previousSibling)&&"LI"===r.nodeName?(r.appendChild(n),Ue(i,o)&&zt.remove(o)):zt.setStyle(o,"listStyleType","none")),Et(o)&&(r=o.previousSibling)&&"LI"===r.nodeName&&r.appendChild(n)}))})),1));var n,r,o,i,a}function Tt(e){return O(C(x(G(e).split("")),(function(e,t){var n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*n})),(function(e,t){return e+t}),0)}function Dt(e,t){return function(){var n=Ke(e);return n&&n.nodeName===t}}function xt(e){e.addCommand("mceListProps",(function(){var t,n,r,o;o=Ke(t=e),Pt(o)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(n={start:t.dom.getAttrib(o,"start","1"),listStyleType:I.some(t.dom.getStyle(o,"list-style-type"))},r=parseInt(n.start,10),Qe(n.listStyleType,"upper-alpha")?Yt(r):Qe(n.listStyleType,"lower-alpha")?Yt(r).toLowerCase():n.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){(function(e){switch(/^[0-9]+$/.test(t=e)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:0<t.length?4:3){case 2:return I.some({listStyleType:I.none(),start:e});case 0:return I.some({listStyleType:I.some("upper-alpha"),start:Tt(e).toString()});case 1:return I.some({listStyleType:I.some("lower-alpha"),start:Tt(e).toString()});case 3:return I.some({listStyleType:I.none(),start:""});case 4:return I.none()}var t})(e.getData().start).each((function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})})),e.close()}})}))}function At(e){return 1===e.dom.nodeType}"undefined"!=typeof window||Function("return this;")();var wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kt=tinymce.util.Tools.resolve("tinymce.util.Tools"),Et=Pe(/^(OL|UL|DL)$/),It=Pe(/^(OL|UL)$/),Pt=Ie("ol"),Bt=Pe(/^(LI|DT|DD)$/),Rt=Pe(/^(DT|DD)$/),Mt=Pe(/^(TH|TD)$/),Ut=Ie("br"),_t=wt.DOM,$t=ye("dd"),Ft=ye("dt"),Ht=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),jt=function(e,t){var n=e.dom.getParents(t,"TD,TH");return 0<n.length?n[0]:e.getBody()},Kt=function(e,t){var n=C(t,(function(t){return We(e,t).getOr(t)}));return Ht.unique(n)},Vt=function e(t,n,r,o){return D(Ne(o),(function(o){return(Ge(o)?e:rt)(t+1,n,r,o)}))},Wt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Qt=wt.DOM,Xt=function(e,t){var n,r=t.nextSibling;if(St(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(St(e,t,r=t.previousSibling)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},qt=function(e){return"list-style-type"in e},zt=wt.DOM,Yt=function e(t){if(--t<0)return"";var n=t%26;return e(Math.floor(t/26))+String.fromCharCode("A".charCodeAt(0)+n)};c.add("lists",(function(e){var t,n,r,o,i,a,u,s;return!1===e.hasPlugin("rtc",!0)?((a=e).getParam("lists_indent_on_tab",!0)&&(u=a).on("keydown",(function(e){e.keyCode!==ge.TAB||ge.metaKeyPressed(e)||u.undoManager.transact((function(){(e.shiftKey?st:ut)(u)&&e.preventDefault()}))})),(s=a).on("keydown",(function(e){e.keyCode===ge.BACKSPACE?Lt(s,!1)&&e.preventDefault():e.keyCode===ge.DELETE&&Lt(s,!0)&&e.preventDefault()})),(i=e).on("BeforeExecCommand",(function(e){var t=e.command.toLowerCase();"indent"===t?ut(i):"outdent"===t&&st(i)})),i.addCommand("InsertUnorderedList",(function(e,t){Ct(i,"UL",t)})),i.addCommand("InsertOrderedList",(function(e,t){Ct(i,"OL",t)})),i.addCommand("InsertDefinitionList",(function(e,t){Ct(i,"DL",t)})),i.addCommand("RemoveList",(function(){ct(i)})),xt(i),i.addCommand("mceListUpdate",(function(e,t){var n,r,o;l(t)&&(r=t,o=Ke(n=i),n.undoManager.transact((function(){l(r.styles)&&n.dom.setStyles(o,r.styles),l(r.attrs)&&H(r.attrs,(function(e,t){return n.dom.setAttrib(o,t,e)}))})))})),i.addQueryStateHandler("InsertUnorderedList",Dt(i,"UL")),i.addQueryStateHandler("InsertOrderedList",Dt(i,"OL")),i.addQueryStateHandler("InsertDefinitionList",Dt(i,"DL"))):xt(e),(o=e).hasPlugin("advlist")||(o.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:c("InsertOrderedList"),onSetup:function(e){return pt(o,"OL",e.setActive)}}),o.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:c("InsertUnorderedList"),onSetup:function(e){return pt(o,"UL",e.setActive)}})),n={text:"List properties...",icon:"ordered-list",onAction:function(){return t.execCommand("mceListProps")},onSetup:function(e){return pt(t,"OL",(function(t){return e.setDisabled(!t)}))}},(t=e).ui.registry.addMenuItem("listprops",n),t.ui.registry.addContextMenu("lists",{update:function(e){var n=Ke(t,e);return Pt(n)?["listprops"]:[]}}),r=e,{backspaceDelete:function(e){Lt(r,e)}};function c(e){return function(){return o.execCommand(e)}}}))}()})();