(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(){"use strict";var e,n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=0,u=function(t,e,n){var r,o,u=t.editorUpload.blobCache,c=u.create((r="mceu",o=(new Date).getTime(),r+"_"+Math.floor(1e9*Math.random())+ ++i+String(o)),n,e);u.add(c),t.insertContent(t.dom.createHTML("img",{src:c.blobUri()}))},c=tinymce.util.Tools.resolve("tinymce.util.Promise"),a=tinymce.util.Tools.resolve("tinymce.Env"),l=tinymce.util.Tools.resolve("tinymce.util.Delay"),f=function(t){t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){(function(t){return new c((function(e){var n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",(function(t){e(Array.prototype.slice.call(t.target.files))})),t.on("focusin remove",(function r(o){var i=function(){e([]),n.parentNode.removeChild(n)};a.os.isAndroid()&&"remove"!==o.type?l.setEditorTimeout(t,i,0):i(),t.off("focusin remove",r)})),n.click()}))})(t).then((function(e){if(e.length>0){var n=e[0];(r=n,new c((function(t){var e=new FileReader;e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(r)}))).then((function(e){u(t,e,n)}))}var r}))}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){!function(t,e,n){t.plugins.table?t.plugins.table.insertTable(e,n):function(t,e,n){t.undoManager.transact((function(){t.insertContent(function(t,e){var n='<table data-mce-id="mce" style="width: 100%">';n+="<tbody>";for(var r=0;r<e;r++){n+="<tr>";for(var o=0;o<t;o++)n+="<td><br></td>";n+="</tr>"}return(n+="</tbody>")+"</table>"}(e,n));var r=function(t){return t.dom.select("*[data-mce-id]")[0]}(t);r.removeAttribute("data-mce-id");var o=t.dom.select("td,th",r);t.selection.setCursorLocation(o[0],0)}))}(t,e,n)}(t,2,2)}})},s=function(e){return function(n){return o=t(r=n),(null===r?"null":"object"===o&&(Array.prototype.isPrototypeOf(r)||r.constructor&&"Array"===r.constructor.name)?"array":"object"===o&&(String.prototype.isPrototypeOf(r)||r.constructor&&"String"===r.constructor.name)?"string":o)===e;var r,o}},d=function(e){return function(n){return t(n)===e}},m=s("string"),g=s("object"),y=s("array"),b=d("boolean"),p=(e=void 0,function(t){return e===t}),v=d("function"),h=function(){},w=function(t){return function(){return t}},k=function(t){return t},T=w(!1),S=w(!0),E=function(){return N},N={fold:function(t,e){return t()},isSome:T,isNone:S,getOr:r=k,getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:w(null),getOrUndefined:w(void 0),or:r,orThunk:n,map:E,each:h,bind:E,exists:T,forall:S,filter:function(){return E()},toArray:function(){return[]},toString:w("none()")},M=function t(e){var n=w(e),r=function(){return i},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},isSome:S,isNone:T,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(n){return t(n(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:N},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},C=M,O=E,q=function(t){return null==t?N:M(t)};function x(t,e,n,r,o){return t(n,r)?C(n):v(o)&&o(n)?O():e(n,r,o)}var A=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},D={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return A(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return A(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return A(n)},fromDom:A,fromPoint:function(t,e,n){return q(t.dom.elementFromPoint(e,n)).map(A)}},L=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var P,_=function(t,e,n){for(var r=t.dom,o=v(n)?n:T;r.parentNode;){r=r.parentNode;var i=D.fromDom(r);if(e(i))return C(i);if(o(i))break}return O()},U=function(t,e,n){return _(t,(function(t){return L(t,e)}),n)},B=(P=m,function(t,e,n){return function(t,e){if(e(t))return!0;throw new Error("Default value doesn't match requested type.")}(n,P),function(t,e){if(y(t)||g(t))throw new Error("expected a string but found: "+t);return p(t)?e:b(t)?!1===t?"":e:t}(t.getParam(e,n),n)}),H=function(t){var e=function(t){return B(t,"quickbars_insert_toolbar","quickimage quicktable")}(t);e.trim().length>0&&t.ui.registry.addContextToolbar("quickblock",{predicate:function(e){var n=D.fromDom(e),r=t.schema.getTextBlockElements(),o=function(e){return e.dom===t.getBody()};return function(t,e,n){return x((function(t,e){return L(t,e)}),U,t,e,n)}(n,"table",o).fold((function(){return function(t,e,n){return x((function(t,e){return e(t)}),_,t,e,n)}(n,(function(e){return e.dom.nodeName.toLowerCase()in r&&t.dom.isEmpty(e.dom)}),o).isSome()}),T)},items:e,position:"line",scope:"editor"})},F=function(t){var e=function(t){return"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className)},n=function(t){return B(t,"quickbars_image_toolbar","alignleft aligncenter alignright")}(t);n.trim().length>0&&t.ui.registry.addContextToolbar("imageselection",{predicate:e,items:n,position:"node"});var r=function(t){return B(t,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")}(t);r.trim().length>0&&t.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!e(n)&&!t.selection.isCollapsed()&&function(e){return"false"!==t.dom.getContentEditableParent(e)}(n)},items:r,position:"selection",scope:"editor"})};o.add("quickbars",(function(t){f(t),H(t),F(t)}))}()})();