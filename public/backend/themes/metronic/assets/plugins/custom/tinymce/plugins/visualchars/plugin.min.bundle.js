(()=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}!function(){"use strict";function t(t){return function(o){return n(o)===t}}function o(n){return function(){return n}}function e(n){return n}function r(){return l}var i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=t("boolean"),a=t("number"),s=o(!(i="string")),f=o(!0),l={fold:function(n,t){return n()},isSome:s,isNone:f,getOr:e,getOrThunk:m,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:e,orThunk:m,map:r,each:function(){},bind:r,exists:s,forall:f,filter:function(){return l},toArray:function(){return[]},toString:o("none()")};function m(n){return n()}function d(n,t){for(var o=0,e=n.length;o<e;o++)t(n[o],o)}function v(n,t){for(var o=h(n),e=0,r=o.length;e<r;e++){var i=o[e];t(n[i],i)}}var g=function n(t){function e(){return u}function r(n){return n(t)}var i=o(t),u={fold:function(n,o){return o(t)},isSome:f,isNone:s,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:e,orThunk:e,map:function(o){return n(o(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?u:l},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return u},h=Object.keys;function p(n){return n.dom.nodeValue}function y(t,o,e){!function(t,o,e){if(!(function(t){return e=n(o=t),(null===o?"null":"object"==e&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":e)===i;var o,e}(e)||c(e)||a(e)))throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(o,e+"")}(t.dom,o,e)}function b(n,t){n.dom.removeAttribute(t)}function w(n,t){var o,e=null===(o=n.dom.getAttribute(t))?void 0:o;return void 0===e||""===e?[]:e.split(" ")}function T(n){return void 0!==n.dom.classList}function k(n,t){var o="";return v(n,(function(n,t){o+=t})),new RegExp("["+o+"]",t?"g":"")}function N(n){return'<span data-mce-bogus="1" class="mce-'+j[n]+'">'+n+"</span>"}function A(n){var t=p(n);return P(n)&&void 0!==t&&M.test(t)}function S(n){return"span"===n.nodeName.toLowerCase()&&n.classList.contains("mce-nbsp-wrap")}function O(n,t){d(I(V.fromDom(t),A),(function(t){var o,e,r,i,u,c=t.dom.parentNode;if(S(c))o=V.fromDom(c),e=F,T(o)?o.dom.classList.add(e):(i=e,u=w(r=o,"class").concat([i]),y(r,"class",u.join(" ")));else{for(var a,s=n.dom.encode(p(t)).replace(H,N),f=n.dom.create("div",null,s);a=f.lastChild;)n.dom.insertAfter(a,t.dom);n.dom.remove(t.dom)}}))}function C(n,t){d(n.dom.select(_,t),(function(t){var o,e,r;S(t)?(o=V.fromDom(t),e=F,T(o)?o.dom.classList.remove(e):function(n,t){return e=t,0<(r=function(n){for(var t=[],o=0,r=n.length;o<r;o++){var i=n[o];i!==e&&t.push(i)}return t}(w(o=n,"class"))).length?y(o,"class",r.join(" ")):b(o,"class"),0;var o,e,r}(o,e),0===(T(r=o)?r.dom.classList:w(r,"class")).length&&b(r,"class")):n.dom.remove(t,!0)}))}function D(n){var t=n.getBody(),o=n.selection.getBookmark(),e=function(n,t){for(;n.parentNode;){if(n.parentNode===t)return n;n=n.parentNode}}(n.selection.getNode(),t);C(n,e=void 0!==e?e:t),O(n,e),n.selection.moveToBookmark(o)}function E(n,t){var o=n,e=t.get();o.fire("VisualChars",{state:e});var r=n.getBody();(!0===t.get()?O:C)(n,r)}function L(n,t){return function(o){function e(n){return o.setActive(n.state)}return o.setActive(t.get()),n.on("VisualChars",e),function(){return n.off("VisualChars",e)}}}function x(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}"undefined"!=typeof window||Function("return this;")();var B,P=function(n){return 3===n.dom.nodeType},V={fromHtml:function(n,t){var o=(t||document).createElement("div");if(o.innerHTML=n,!o.hasChildNodes()||1<o.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return x(o.childNodes[0])},fromTag:function(n,t){return x((t||document).createElement(n))},fromText:function(n,t){return x((t||document).createTextNode(n))},fromDom:x,fromPoint:function(n,t,o){return(null==(e=n.dom.elementFromPoint(t,o))?l:g(e)).map(x);var e}},j={" ":"nbsp","­":"shy"},M=k(j),H=k(j,!0),_=(B="",v(j,(function(n){B&&(B+=","),B+="span.mce-"+n})),B),F="mce-nbsp",I=function n(t,o){var e=[];return d(function(n,t){for(var o=n.length,e=new Array(o),r=0;r<o;r++){var i=n[r];e[r]=t(i,r)}return e}(t.dom.childNodes,V.fromDom),(function(t){e=(e=o(t)?e.concat([t]):e).concat(n(t,o))})),e},U=tinymce.util.Tools.resolve("tinymce.util.Delay");u.add("visualchars",(function(n){var t,o,e,r,i,u,c,a,s,f,l=(t=n.getParam("visualchars_default_state",!1),o=t,{get:function(){return o},set:function(n){o=n}});function m(){return e.execCommand("mceVisualChars")}return function(n,t){n.addCommand("mceVisualChars",(function(){!function(n,t){t.set(!t.get());var o=n.selection.getBookmark();E(n,t),n.selection.moveToBookmark(o)}(n,t)}))}(n,l),(e=n).ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:m,onSetup:L(e,r=l)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:m,onSetup:L(e,r)}),i=n,u=l,c=U.debounce((function(){D(i)}),300),!1!==i.getParam("forced_root_block")&&i.on("keydown",(function(n){!0===u.get()&&(13===n.keyCode?D(i):c())})),i.on("remove",c.stop),s=l,(a=n).on("init",(function(){E(a,s)})),f=l,{isEnabled:function(){return f.get()}}}))}()})();