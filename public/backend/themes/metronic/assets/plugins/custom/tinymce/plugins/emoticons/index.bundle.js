(()=>{var t={24050:()=>{!function(){"use strict";var t,n,e,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=(t=null,function(n){return t===n}),u=function(){},c=function(t){return function(){return t}},a=function(t){return t},l=c(!1),s=c(!0),f=function(){return g},g={fold:function(t,n){return t()},isSome:l,isNone:s,getOr:e=a,getOrThunk:n=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:e,orThunk:n,map:f,each:u,bind:f,exists:l,forall:s,filter:function(){return f()},toArray:function(){return[]},toString:c("none()")},m=function t(n){var e=c(n),r=function(){return i},o=function(t){return t(n)},i={fold:function(t,e){return e(n)},isSome:s,isNone:l,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(e){return t(e(n))},each:function(t){t(n)},bind:o,exists:o,forall:o,filter:function(t){return t(n)?i:g},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return i},d=m,v=f,h=function(t){return null==t?g:m(t)},y=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r},p=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},b=function(){return b=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},b.apply(this,arguments)},w=Object.keys,O=Object.hasOwnProperty,C=function(t,n){for(var e=w(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}},k=function(t,n){var e={};return C(t,(function(t,r){var o=n(t,r);e[o.k]=o.v})),e},x=function(t,n){return O.call(t,n)},j=(r=function(t,n){return n},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var e={},o=0;o<t.length;o++){var i=t[o];for(var u in i)x(i,u)&&(e[u]=r(e[u],i[u]))}return e}),A=function(){var t=function(t){var n=p(v()),e=function(){return n.get().each(t)};return{clear:function(){e(),n.set(v())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(t){e(),n.set(d(t))}}}(u);return b(b({},t),{on:function(n){return t.get().each(n)}})},_=function(t,n){return-1!==t.indexOf(n)},T=tinymce.util.Tools.resolve("tinymce.Resource"),P=tinymce.util.Tools.resolve("tinymce.util.Delay"),D=tinymce.util.Tools.resolve("tinymce.util.Promise"),S="All",L={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},E=function(t,n){return x(t,n)?t[n]:n},F=function(t){var n,e=function(t){return t.getParam("emoticons_append",{},"object")}(t);return n=function(t){return b({keywords:[],category:"user"},t)},k(e,(function(t,e){return{k:e,v:n(t,e)}}))},N=function(t,n,e){var r=A(),o=A(),i=function(t){return t.getParam("emoticons_images_url","https://twemoji.maxcdn.com/v/13.0.1/72x72/","string")}(t),u=function(t){return function(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n}(t.char,"<img",0)?t.char.replace(/src="([^"]+)"/,(function(t,n){return'src="'+i+n+'"'})):t.char};t.on("init",(function(){T.load(e,n).then((function(n){var e=F(t);!function(t){var n={},e=[];C(t,(function(t,r){var o={title:r,keywords:t.keywords,char:u(t),category:E(L,t.category)},i=void 0!==n[o.category]?n[o.category]:[];n[o.category]=i.concat([o]),e.push(o)})),r.set(n),o.set(e)}(j(n,e))}),(function(t){console.log("Failed to load emoticons: "+t),r.set({}),o.set([])}))}));var c=function(){return o.get().getOr([])},a=function(){return r.isSet()&&o.isSet()};return{listCategories:function(){return[S].concat(w(r.get().getOr({})))},hasLoaded:a,waitForLoad:function(){return a()?D.resolve(!0):new D((function(t,e){var r=15,o=P.setInterval((function(){a()?(P.clearInterval(o),t(!0)):--r<0&&(console.log("Could not load emojis from url: "+n),P.clearInterval(o),e(!1))}),100)}))},listAll:c,listCategory:function(t){return t===S?c():r.get().bind((function(n){return h(n[t])})).getOr([])}}},I=function(t,n){return _(t.title.toLowerCase(),n)||function(t,n){for(var e=0,r=t.length;e<r;e++)if(n(t[e],e))return!0;return!1}(t.keywords,(function(t){return _(t.toLowerCase(),n)}))},z=function(t,n,e){for(var r=[],o=n.toLowerCase(),i=e.fold((function(){return l}),(function(t){return function(n){return n>=t}})),u=0;u<t.length&&(0!==n.length&&!I(t[u],o)||(r.push({value:t[u].char,text:t[u].title,icon:t[u].char}),!i(r.length)));u++);return r},M="pattern",U=function(t,n){var e,r,o,u,c={pattern:"",results:z(n.listAll(),"",d(300))},a=p(S),l=(e=function(t){!function(t){var e=t.getData(),r=a.get(),o=n.listCategory(r),i=z(o,e.pattern,r===S?d(300):v());t.setData({results:i})}(t)},r=200,o=null,{cancel:u=function(){i(o)||(clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u(),o=setTimeout((function(){o=null,e.apply(null,t)}),r)}}),s={label:"Search",type:"input",name:M},f={type:"collection",name:"results"},g=function(){return{title:"Emoticons",size:"normal",body:{type:"tabpanel",tabs:y(n.listCategories(),(function(t){return{title:t,name:t,items:[s,f]}}))},initialData:c,onTabChange:function(t,n){a.set(n.newTabName),l.throttle(t)},onChange:l.throttle,onAction:function(n,e){"results"===e.name&&(!function(t,n){t.insertContent(n)}(t,e.value),n.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}},m=t.windowManager.open(g());m.focus(M),n.hasLoaded()||(m.block("Loading emoticons..."),n.waitForLoad().then((function(){m.redial(g()),l.throttle(m),m.focus(M),m.unblock()})).catch((function(t){m.redial({title:"Emoticons",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"<p>Could not load emoticons</p>"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),m.focus(M),m.unblock()})))};o.add("emoticons",(function(t,n){var e=function(t,n){var e=function(t){return t.getParam("emoticons_database","emojis","string")}(t);return t.getParam("emoticons_database_url",n+"/js/"+e+t.suffix+".js","string")}(t,n),r=function(t){return t.getParam("emoticons_database_id","tinymce.plugins.emoticons","string")}(t),o=N(t,e,r);!function(t,n){t.addCommand("mceEmoticons",(function(){return U(t,n)}))}(t,o),function(t){var n=function(){return t.execCommand("mceEmoticons")};t.ui.registry.addButton("emoticons",{tooltip:"Emoticons",icon:"emoji",onAction:n}),t.ui.registry.addMenuItem("emoticons",{text:"Emoticons...",icon:"emoji",onAction:n})}(t),function(t,n){t.ui.registry.addAutocompleter("emoticons",{ch:":",columns:"auto",minChars:2,fetch:function(t,e){return n.waitForLoad().then((function(){var r=n.listAll();return z(r,t,d(e))}))},onAction:function(n,e,r){t.selection.setRng(e),t.insertContent(r),n.hide()}})}(t,o),function(t){t.on("PreInit",(function(){t.parser.addAttributeFilter("data-emoticon",(function(t){!function(t,n){for(var e=0,r=t.length;e<r;e++)n(t[e],e)}(t,(function(t){t.attr("data-mce-resize","false"),t.attr("data-mce-placeholder","1")}))}))}))}(t)}))}()}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return t[r](i,i.exports,e),i.exports}e(24050)})();