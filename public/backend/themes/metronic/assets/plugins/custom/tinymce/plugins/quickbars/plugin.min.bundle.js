(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(){"use strict";function e(e){return function(n){return r=t(o=n),(null===o?"null":"object"==r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===e;var o,r}}function n(e){return function(n){return t(n)===e}}function o(t){return function(){return t}}function r(t){return t}function i(){return v}var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=0,a=tinymce.util.Tools.resolve("tinymce.util.Promise"),l=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.util.Delay"),f=e("string"),d=e("object"),m=e("array"),g=n("boolean"),y=n("function"),b=o(!1),p=o(!void 0),v={fold:function(t,e){return t()},isSome:b,isNone:p,getOr:r,getOrThunk:h,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:r,orThunk:h,map:i,each:function(){},bind:i,exists:b,forall:p,filter:function(){return v},toArray:function(){return[]},toString:o("none()")};function h(t){return t()}var k=function t(e){function n(){return u}function r(t){return t(e)}var i=o(e),u={fold:function(t,n){return n(e)},isSome:p,isNone:b,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:n,orThunk:n,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?u:v},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u},w={some:k,none:i,from:function(t){return null==t?v:k(t)}};function T(t,e,n,o,r){return t(n,o)?w.some(n):y(r)&&r(n)?w.none():e(n,o,r)}function S(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function E(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}}var N={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return E(n.childNodes[0])},fromTag:function(t,e){return E((e||document).createElement(t))},fromText:function(t,e){return E((e||document).createTextNode(t))},fromDom:E,fromPoint:function(t,e,n){return w.from(t.dom.elementFromPoint(e,n)).map(E)}};function M(t,e,n){for(var o=t.dom,r=y(n)?n:b;o.parentNode;){o=o.parentNode;var i=N.fromDom(o);if(e(i))return w.some(i);if(r(i))break}return w.none()}function C(t,e,n){return M(t,(function(t){return S(t,e)}),n)}"undefined"!=typeof window||Function("return this;")();var O,q=(O=f,function(t,e,n){return function(){if(!O(n))throw new Error("Default value doesn't match requested type.")}(),function(t,e){if(m(t)||d(t))throw new Error("expected a string but found: "+t);return undefined===t?e:g(t)?!1===t?"":e:t}(t.getParam(e,n),n)});u.add("quickbars",(function(t){var e,n;(function(t){t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){var e=t;new a((function(t){var n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",(function(e){t(Array.prototype.slice.call(e.target.files))})),e.on("focusin remove",(function o(r){function i(){t([]),n.parentNode.removeChild(n)}l.os.isAndroid()&&"remove"!==r.type?s.setEditorTimeout(e,i,0):i(),e.off("focusin remove",o)})),n.click()})).then((function(e){var n,o;0<e.length&&(n=e[0],o=n,new a((function(t){var e=new FileReader;e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(o)})).then((function(e){var o,r,i,u,a,l;r=e,i=n,l=(a=(o=t).editorUpload.blobCache).create((u=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++c+String(u)),i,r),a.add(l),o.insertContent(o.dom.createHTML("img",{src:l.blobUri()}))})))}))}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){var e,n;(e=t).plugins.table?e.plugins.table.insertTable(2,2):(n=e).undoManager.transact((function(){n.insertContent(function(){var t='<table data-mce-id="mce" style="width: 100%">';t+="<tbody>";for(var e=0;e<2;e++){t+="<tr>";for(var n=0;n<2;n++)t+="<td><br></td>";t+="</tr>"}return(t+="</tbody>")+"</table>"}());var t=n.dom.select("*[data-mce-id]")[0];t.removeAttribute("data-mce-id");var e=n.dom.select("td,th",t);n.selection.setCursorLocation(e[0],0)}))}})})(t),0<(n=q(e=t,"quickbars_insert_toolbar","quickimage quicktable")).trim().length&&e.ui.registry.addContextToolbar("quickblock",{predicate:function(t){function n(t){return t.dom===e.getBody()}var o=N.fromDom(t),r=e.schema.getTextBlockElements();return T(S,C,o,"table",n).fold((function(){return T((function(t,e){return e(t)}),M,o,(function(t){return t.dom.nodeName.toLowerCase()in r&&e.dom.isEmpty(t.dom)}),n).isSome()}),b)},items:n,position:"line",scope:"editor"}),function(t){function e(t){return"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className)}var n=q(t,"quickbars_image_toolbar","alignleft aligncenter alignright");0<n.trim().length&&t.ui.registry.addContextToolbar("imageselection",{predicate:e,items:n,position:"node"});var o=q(t,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote");0<o.trim().length&&t.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!e(n)&&!t.selection.isCollapsed()&&"false"!==t.dom.getContentEditableParent(n)},items:o,position:"selection",scope:"editor"})}(t)}))}()})();